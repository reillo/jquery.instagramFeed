!function(m){var t={host:"https://www.instagram.com/",proxy_image_url:"/instamedia/instamedia.php",username:"",tag:"",user_id:"",location:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_captions:!1,display_igtv:!1,max_tries:8,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640,lazy_load:!1,cache_time:60,on_error:console.error},y={150:0,240:1,320:2,480:3,640:4},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function h(e){return e.replace(/[&<>"'`=\/]/g,function(e){return a[e]})}function u(e){return void 0!==e.node.edge_media_to_caption.edges[0]&&void 0!==e.node.edge_media_to_caption.edges[0].node&&void 0!==e.node.edge_media_to_caption.edges[0].node.text&&null!==e.node.edge_media_to_caption.edges[0].node.text?e.node.edge_media_to_caption.edges[0].node.text:void 0!==e.node.title&&null!==e.node.title&&0!=e.node.title.length?e.node.title:void 0!==e.node.accessibility_caption&&null!==e.node.accessibility_caption&&0!=e.node.accessibility_caption.length&&e.node.accessibility_caption}function l(e,a){var t=a||!1;if(!a&&0<e.cache_time&&(null!==(a=localStorage.getItem(e.cache_time_key))&&parseInt(a)+6e4*e.cache_time>(new Date).getTime()&&(t=!0)),t){e=localStorage.getItem(e.cache_data_key);if(null!==e)return JSON.parse(e)}return!1}function s(a,t,i,r,o,n){var e;o&&n&&(e="https://images"+~~(3333*Math.random())+"-focus-opensocial.googleusercontent.com/gadgets/proxy?container=none&url="+a),m.get(e||a,function(e){e=function(e,a){switch(e){case"username":case"tag":case"location":try{a=a.split("window._sharedData = ")[1].split("<\/script>")[0]}catch(e){return!1}return void 0!==(a=(a=JSON.parse(a.substr(0,a.length-1))).entry_data.ProfilePage||a.entry_data.TagPage||a.entry_data.LocationsPage)&&(a[0].graphql.user||a[0].graphql.hashtag||a[0].graphql.location);case"userid":return void 0!==a.data.user?a.data.user:!1}}(t,e);r(!1!==e&&e)}).fail(function(e){1<i?(console.warn("Instagram Feed: Request failed, "+(i-1)+" tries left. Retrying..."),console.warn(t),s(a,t,i-1,r,o,!n)):r(!1,e)})}function f(e,a){return e.proxy_image_url+"?media-url="+encodeURIComponent(a)}function i(o,n){var e,a=l(o,!1);if(!1!==a)n(a);else{switch(o.type){case"username":e=o.host+o.id+"/";break;case"tag":e=o.host+"explore/tags/"+o.id+"/";break;case"location":e=o.host+"explore/locations/"+o.id+"/";break;case"userid":e=o.host+'graphql/query/?query_id=17888483320059182&variables={"id":"'+o.id+'","first":'+o.items+',"after":null}'}s(e,o.type,o.max_tries,function(e,a){var t,i,r;!1!==e?(t=o,i=e,r=localStorage.getItem(t.cache_time_key),0!=t.cache_time&&(null===r||parseInt(r)+6e4*t.cache_time>(new Date).getTime())&&(localStorage.setItem(t.cache_data_key,JSON.stringify(i)),localStorage.setItem(t.cache_time_key,(new Date).getTime())),n(e)):void 0===a?o.on_error("Instagram Feed: It looks like the profile you are trying to fetch is age restricted. See https://github.com/jsanahuja/InstagramFeed/issues/26",3):!1!==(e=l(o,!0))?n(e):o.on_error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: "+a.status,5)},o.host===t.host&&"userid"!=o.type,!1)}}m.instagramFeed=function(e){var a=m.fn.extend({},t,e);return void 0!==e.display_profile&&e.display_profile&&""!=a.user_id&&console.warn("Instagram Feed: 'display_profile' is not available using 'user_id' (GraphQL API)"),void 0===e.display_biography||!e.display_biography||""==a.tag&&""==a.location&&""==a.user_id||console.warn("Instagram Feed: 'display_biography' is not available unless you are loading an user ('username' parameter)"),void 0!==a.get_data&&console.warn("Instagram Feed: options.get_data is deprecated, options.callback is always called if defined"),null==a.callback&&""==a.container?(a.on_error("Instagram Feed: Error, neither container found nor callback defined.",2),!1):(""!=a.username?(a.type="username",a.id=a.username):""!=a.tag?(a.type="tag",a.id=a.tag):""!=a.location?(a.type="location",a.id=a.location):(a.type="userid",a.id=a.user_id),a.cache_data_key="instagramFeed_"+a.type+"_"+a.id,a.cache_time_key=a.cache_data_key+"_time",i(a,function(e){""!=a.container&&function(e,a){var t,i,r="";if(e.styling?(t={profile_container:' style="text-align:center;"',profile_image:' style="border-radius:10em;width:15%;max-width:125px;min-width:50px;"',profile_name:' style="font-size:1.2em;"',profile_biography:' style="font-size:1em;"',gallery_image:' style="width:100%;"',gallery_image_link:' style="width:'+(100-2*e.margin*e.items_per_row)/e.items_per_row+"%; margin:"+e.margin+'%;position:relative; display: inline-block; height: 100%;"'},e.display_captions&&(r+="<style>                    a[data-caption]:hover::after {                        content: attr(data-caption);                        text-align: center;                        font-size: 0.8rem;                        color: black;                        position: absolute;                        left: 0;                        right: 0;                        bottom: 0;                        padding: 1%;                        max-height: 100%;                        overflow-y: auto;                        overflow-x: hidden;                        background-color: hsla(0, 100%, 100%, 0.8);                    }                </style>")):t={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:"",gallery_image_link:""},e.display_profile&&"userid"!==e.type&&(i=f(e,a.profile_pic_url),r+='<div class="instagram_profile"'+t.profile_container+">",r+='<img class="instagram_profile_image" src="'+i+'" alt="'+("tag"==e.type?a.name+" tag pic":a.username+" profile pic")+'"'+t.profile_image+(e.lazy_load?' loading="lazy"':"")+" />","tag"==e.type?r+='<p class="instagram_tag"'+t.profile_name+'><a href="https://www.instagram.com/explore/tags/'+e.tag+'/" rel="noopener" target="_blank">#'+e.tag+"</a></p>":"username"==e.type?(r+="<p class='instagram_username'"+t.profile_name+">@"+a.full_name+" (<a href='https://www.instagram.com/"+e.username+"/' rel='noopener' target='_blank'>@"+e.username+"</a>)</p>",e.display_biography&&(r+="<p class='instagram_biography'"+t.profile_biography+">"+a.biography+"</p>")):"location"==e.type&&(r+="<p class='instagram_location'"+t.profile_name+"><a href='https://www.instagram.com/explore/locations/"+e.location+"/' rel='noopener' target='_blank'>"+a.name+"</a></p>"),r+="</div>"),e.display_gallery)if(void 0!==a.is_private&&!0===a.is_private)r+='<p class="instagram_private"><strong>This profile is private</strong></p>';else{var o=void 0!==y[e.image_size]?y[e.image_size]:y[640],n=(a.edge_owner_to_timeline_media||a.edge_hashtag_to_media||a.edge_location_to_media).edges,l=n.length>e.items?e.items:n.length;r+="<div class='instagram_gallery'>";for(var s=0;s<l;s++){var d,c,g="https://www.instagram.com/p/"+n[s].node.shortcode;switch(!1===(p=u(n[s]))&&(p=("userid"==e.type?"":e.id)+" image"),p=h(p),n[s].node.__typename){case"GraphSidecar":c="sidecar",d=n[s].node.thumbnail_resources[o].src;break;case"GraphVideo":c="video",d=n[s].node.thumbnail_src;break;default:c="image",d=n[s].node.thumbnail_resources[o].src}d=f(e,d),r+='<a href="'+g+'"'+(e.display_captions?' data-caption="'+p+'"':"")+' class="instagram-'+c+'" rel="noopener" target="_blank"'+t.gallery_image_link+">",r+="<img"+(e.lazy_load?' loading="lazy"':"")+' src="'+d+'" alt="'+p+'"'+t.gallery_image+" />",r+="</a>"}r+="</div>"}if(e.display_igtv&&void 0!==a.edge_felix_video_timeline){var _=a.edge_felix_video_timeline.edges,l=_.length>e.items?e.items:_.length;if(0<_.length){r+='<div class="instagram_igtv">';for(s=0;s<l;s++){var p,g="https://www.instagram.com/p/"+_[s].node.shortcode;!1===(p=u(_[s]))&&(p=("userid"==e.type?"":e.id)+" image"),p=h(p),r+='<a href="'+g+'"'+(e.display_captions?' data-caption="'+p+'"':"")+' rel="noopener" target="_blank"'+t.gallery_image_link+">",r+="<img"+(e.lazy_load?' loading="lazy"':"")+' src="'+_[s].node.thumbnail_src+'" alt="'+p+'"'+t.gallery_image+" />",r+="</a>"}r+="</div>"}}m(e.container).html(r)}(a,e),null!=a.callback&&a.callback(e)}),!0)}}(jQuery);